import{r as i,h as t,H as e}from"./p-ba2c52de.js";const s=class{constructor(t){i(this,t)}fetchData(){var i;(i=this.status_url,fetch(i).then((i=>i.json()))).then((i=>{this.position=i.position,this.progress=i.progress,this.wait_time=i.wait_time,this.last_updated=i.last_updated,this.messages=i.messages}))}async refreshQueueData(){this.fetchData()}componentDidLoad(){this.progress_el.style.width=String(this.progress)+"%",this.messages=[],this.email_sent=!1}handleSubmit(i){i.preventDefault(),console.log(this.email),this.email_sent=!0}handleChange(i){this.email=i.target.value}render(){var i;return t(e,null,t("div",{class:"header"},"LOGO"),t("div",{class:"intro"},t("h2",null,"You are in a queue"),t("p",null,"The website is currently experiencing a high volume of traffic, to keep things running smoothly an orderly queue has been formed. Please hang tight and see below for an estimation of when it's your turn.")),t("div",{class:"progressbar"},t("div",{class:"progress",ref:i=>this.progress_el=i},this.progress?this.progress:0,"%")),t("div",{class:"stats"},t("p",null,"Queue position: ",this.position),t("p",null,"Estimated wait time: ",this.wait_time),t("p",null,"Last updated: ",this.last_updated)),null===(i=this.messages)||void 0===i?void 0:i.map((i=>t("div",{class:"messages"},t("div",null,i.message),t("div",null,i.timestamp)))),t("div",{class:"notify"},this.email_sent?t("div",null,t("p",null,"You will receive an email when it's your turn, you will have 10 minutes to click the link in the email.")):t("div",null,t("p",null,"Send me an email when it's my turn:"),t("form",{onSubmit:i=>this.handleSubmit(i)},t("label",null,"Email:",t("input",{type:"text",value:this.email,onInput:i=>this.handleChange(i)})),t("input",{type:"submit",value:"Submit"})))),t("div",{class:"footer"},t("a",{href:"#"},"Exit the queue")," (And give up your position)"))}};s.style=":host{display:block;color:black}.progressbar{width:100%;background-color:grey}.progress{width:1%;height:30px;background-color:#4caf50;text-align:center;line-height:30px;color:white}";export{s as waiting_room}